"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!==module?module.exports=t():"function"==typeof define&&define.amd?define(t()):e.UploadTools=t()}(window,function(){var p={url:"",data:{},type:"POST",beforeSend:function(){},success:function(){},error:function(){},complete:function(){},delay:300,xRequestedWith:!1,timeout:0,accept:"*/*"},s=function(e,t,n){e.setRequestHeader(t,n)},y=function(e){var t=e.data,n=e.files,o=new FormData;if(t)if("string"==typeof t)o.append(t,"");else if("object"===(void 0===t?"undefined":_typeof(t)))for(var r in t){var f=t[r];f&&o.append(r,f)}if(Array.isArray(n)&&0<n.length){var i=!0,u=!1,a=void 0;try{for(var c,p=n[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var s=c.value;o.append(s.name,s.file)}}catch(e){u=!0,a=e}finally{try{!i&&p.return&&p.return()}finally{if(u)throw a}}}return o};return function(e){var t,n,o,r,f,i,u=new XMLHttpRequest,a=(e=Object.assign(p,e)).delay,c=e.timeout;c&&(u.timeout=c),u.open(e.type,e.url),(t=e.beforeSend)&&"function"==typeof t&&t(),s(u,"Accept",e.accept),e.xRequestedWith&&s(u,"X-Requested-With","XMLHttpRequest"),n=u,r=(o=e).success,f=o.error,i=o.complete,n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(r&&"function"==typeof r&&r(JSON.parse(n.response),n.status,n),i&&"function"==typeof i&&i())},n.onerror=function(e){f&&"function"==typeof f&&f(e),i&&"function"==typeof i&&i()},a?setTimeout(function(){u.send(y(e))},a):u.send(y(e))}});